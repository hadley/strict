<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Make R Just a Little Stricter • strict</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Make R Just a Little Stricter">
<meta name="description" content="This packages tweaks the operation of base R code to make things a little stricter.">
<meta property="og:description" content="This packages tweaks the operation of base R code to make things a little stricter.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">strict</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hadley/strict/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="strict">strict<a class="anchor" aria-label="anchor" href="#strict"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of strict is to make R behave a little more strictly, making base functions more likely to throw an error rather than returning potentially ambiguous results.</p>
<p><code><a href="https://github.com/hadley/strict" class="external-link">library(strict)</a></code> forces you to confront potential problems now, instead of in the future. This has both pros and cons: often you can most easily fix a potential ambiguity when your working on the code (rather than in six months time when you’ve forgotten how it works), but it also forces you to resolve ambiguities that might never occur with your code/data.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"hadley/strict"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<p><code><a href="https://github.com/hadley/strict" class="external-link">library(strict)</a></code> affects code in the current script/session only (i.e. it doesn’t affect code in others packages).</p>
<ul>
<li>
<p>An alternative conflict resolution mechanism. Instead of warning about conflicts on package load and letting the last loaded package win, strict throws an error when you access ambiguous functions:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/strict" class="external-link">strict</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://had.co.nz/plyr" class="external-link">plyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hbiostat.org/R/Hmisc/" class="external-link">Hmisc</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in library(package, help = help, pos = pos, lib.loc = lib.loc, character.only = TRUE, : there is no package called 'Hmisc'</span></span>
<span></span>
<span><span class="va">is.discrete</span></span>
<span><span class="co">#&gt; function (x) </span></span>
<span><span class="co">#&gt; is.factor(x) || is.character(x) || is.logical(x)</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x1068481a0&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:plyr&gt;</span></span></code></pre></div>
<p>(Thanks to @<a href="https://github.com/krlmlr" class="external-link">krlmlr</a> for this neat idea!)</p>
</li>
<li>
<p>Shims for functions with “risky” arguments, i.e. arguments that either rely on global options (like <code>stringsAsFactors</code>) or have computed defaults that 90% evaluate to one thing (like <code>drop</code>). strict forces you to supply values for these arguments.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/strict" class="external-link">strict</a></span><span class="op">)</span></span>
<span><span class="va">mtcars</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4</span></span>
<span><span class="co">#&gt; [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7</span></span>
<span><span class="co">#&gt; [31] 15.0 21.4</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `strict_abort()` at strict/R/shim-risky.R:10:3:</span></span>
<span><span class="co">#&gt; ! [strict]</span></span>
<span><span class="co">#&gt; Please supply a value for `stringsAsFactors` argument.</span></span>
<span><span class="co">#&gt; Please see ?strict_arg for more details</span></span></code></pre></div>
</li>
<li>
<p>Automatically sets options to warn when partial matching occurs.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/strict" class="external-link">strict</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>xyz <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">x</span></span>
<span><span class="co">#&gt; Warning in df$x: partial match of 'x' to 'xyz'</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
</li>
<li>
<p><code>T</code> and <code>F</code> generate errors, forcing you to use <code>TRUE</code> and <code>FALSE</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/strict" class="external-link">strict</a></span><span class="op">)</span></span>
<span><span class="cn">T</span></span>
<span><span class="co">#&gt; Error in `strict_abort()` at strict/R/shims.R:22:9:</span></span>
<span><span class="co">#&gt; ! [strict]</span></span>
<span><span class="co">#&gt; Please use TRUE, not T</span></span></code></pre></div>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply()</a></code> throws an error suggesting that you use the type-safe <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply()</a></code> instead. <code><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply()</a></code> throws an error if you use it with a data frame.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/strict" class="external-link">strict</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="va">sum</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `strict_abort()` at strict/R/shim-apply.R:30:3:</span></span>
<span><span class="co">#&gt; ! [strict]</span></span>
<span><span class="co">#&gt; Please use `vapply()` instead of `sapply()`.</span></span>
<span><span class="co">#&gt; Please see ?strict_sapply for more details</span></span></code></pre></div>
</li>
<li>
<p><code>:</code> will throw an error instead of creating a decreasing sequence that terminates in 0.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/strict" class="external-link">strict</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `strict_abort()` at strict/R/shim-colon.R:15:5:</span></span>
<span><span class="co">#&gt; ! [strict]</span></span>
<span><span class="co">#&gt; Tried to create descending sequence 1:0. Do you want to `seq_along()` instead?</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Please see ?shim_colon for more details</span></span></code></pre></div>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag()</a></code> and <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> throw an error if given scalar <code>x</code>. This avoids an otherwise unpleasant surprise.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/strict" class="external-link">strict</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5 3 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5 4</span></span>
<span><span class="fu"><a href="reference/lax.html">lax</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4 2 1 3 5</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `strict_abort()` at strict/R/shim-scalar.R:30:5:</span></span>
<span><span class="co">#&gt; ! [strict]</span></span>
<span><span class="co">#&gt; `sample()` has surprising behaviour when `x` is a scalar.</span></span>
<span><span class="co">#&gt; Use `sample.int()` instead.</span></span>
<span><span class="co">#&gt; Please see ?strict_sample for more details</span></span></code></pre></div>
</li>
</ul>
<p>Once strict is loaded, you can continue to run code in a lax manner using <code><a href="reference/lax.html">lax()</a></code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hadley/strict/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/hadley/strict/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing strict</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Hadley Wickham <br><small class="roles"> Author, maintainer </small>   </li>
<li>Posit Software, PBC <br><small class="roles"> Copyright holder, funder </small>  <a href="https://ror.org/03wc8by49" class="external-link"><img src="https://raw.githubusercontent.com/ror-community/ror-logos/main/ror-icon-rgb.svg" class="ror" alt="ROR"></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hadley/strict/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/hadley/strict/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/hadley/strict" class="external-link"><img src="https://codecov.io/gh/hadley/strict/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hadley Wickham, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
